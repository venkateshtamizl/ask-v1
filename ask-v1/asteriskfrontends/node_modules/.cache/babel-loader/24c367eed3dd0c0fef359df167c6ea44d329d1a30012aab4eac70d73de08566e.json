{"ast":null,"code":"\"use strict\";\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\nvar Logger = require('./Logger');\nvar SIPMessage = require('./SIPMessage');\nvar JsSIP_C = require('./Constants');\nvar Transactions = require('./Transactions');\nvar Dialog_RequestSender = require('./Dialog/RequestSender');\nvar Utils = require('./Utils');\nvar logger = new Logger('Dialog');\nvar C = {\n  // Dialog states.\n  STATUS_EARLY: 1,\n  STATUS_CONFIRMED: 2,\n  STATUS_TERMINATED: 3\n}; // RFC 3261 12.1.\n\nmodule.exports = /*#__PURE__*/function () {\n  _createClass(Dialog, null, [{\n    key: \"C\",\n    // Expose C object.\n    get: function get() {\n      return C;\n    }\n  }]);\n  function Dialog(owner, message, type) {\n    var state = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : C.STATUS_CONFIRMED;\n    _classCallCheck(this, Dialog);\n    this._owner = owner;\n    this._ua = owner._ua;\n    this._uac_pending_reply = false;\n    this._uas_pending_reply = false;\n    if (!message.hasHeader('contact')) {\n      return {\n        error: 'unable to create a Dialog without Contact header field'\n      };\n    }\n    if (message instanceof SIPMessage.IncomingResponse) {\n      state = message.status_code < 200 ? C.STATUS_EARLY : C.STATUS_CONFIRMED;\n    }\n    var contact = message.parseHeader('contact'); // RFC 3261 12.1.1.\n\n    if (type === 'UAS') {\n      this._id = {\n        call_id: message.call_id,\n        local_tag: message.to_tag,\n        remote_tag: message.from_tag,\n        toString: function toString() {\n          return this.call_id + this.local_tag + this.remote_tag;\n        }\n      };\n      this._state = state;\n      this._remote_seqnum = message.cseq;\n      this._local_uri = message.parseHeader('to').uri;\n      this._remote_uri = message.parseHeader('from').uri;\n      this._remote_target = contact.uri;\n      this._route_set = message.getHeaders('record-route');\n      this._ack_seqnum = this._remote_seqnum;\n    } // RFC 3261 12.1.2.\n    else if (type === 'UAC') {\n      this._id = {\n        call_id: message.call_id,\n        local_tag: message.from_tag,\n        remote_tag: message.to_tag,\n        toString: function toString() {\n          return this.call_id + this.local_tag + this.remote_tag;\n        }\n      };\n      this._state = state;\n      this._local_seqnum = message.cseq;\n      this._local_uri = message.parseHeader('from').uri;\n      this._remote_uri = message.parseHeader('to').uri;\n      this._remote_target = contact.uri;\n      this._route_set = message.getHeaders('record-route').reverse();\n      this._ack_seqnum = null;\n    }\n    this._ua.newDialog(this);\n    logger.debug(\"new \".concat(type, \" dialog created with status \").concat(this._state === C.STATUS_EARLY ? 'EARLY' : 'CONFIRMED'));\n  }\n  _createClass(Dialog, [{\n    key: \"isTerminated\",\n    value: function isTerminated() {\n      return this._status === C.STATUS_TERMINATED;\n    }\n  }, {\n    key: \"update\",\n    value: function update(message, type) {\n      this._state = C.STATUS_CONFIRMED;\n      logger.debug(\"dialog \".concat(this._id.toString(), \"  changed to CONFIRMED state\"));\n      if (type === 'UAC') {\n        // RFC 3261 13.2.2.4.\n        this._route_set = message.getHeaders('record-route').reverse();\n      }\n    }\n  }, {\n    key: \"terminate\",\n    value: function terminate() {\n      logger.debug(\"dialog \".concat(this._id.toString(), \" deleted\"));\n      this._ua.destroyDialog(this);\n      this._state = C.STATUS_TERMINATED;\n    }\n  }, {\n    key: \"sendRequest\",\n    value: function sendRequest(method) {\n      var _this = this;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var extraHeaders = Utils.cloneArray(options.extraHeaders);\n      var eventHandlers = Utils.cloneObject(options.eventHandlers);\n      var body = options.body || null;\n      var request = this._createRequest(method, extraHeaders, body); // Increase the local CSeq on authentication.\n\n      eventHandlers.onAuthenticated = function () {\n        _this._local_seqnum += 1;\n      };\n      var request_sender = new Dialog_RequestSender(this, request, eventHandlers);\n      request_sender.send(); // Return the instance of OutgoingRequest.\n\n      return request;\n    }\n  }, {\n    key: \"receiveRequest\",\n    value: function receiveRequest(request) {\n      // Check in-dialog request.\n      if (!this._checkInDialogRequest(request)) {\n        return;\n      } // ACK received. Cleanup this._ack_seqnum.\n\n      if (request.method === JsSIP_C.ACK && this._ack_seqnum !== null) {\n        this._ack_seqnum = null;\n      } // INVITE received. Set this._ack_seqnum.\n      else if (request.method === JsSIP_C.INVITE) {\n        this._ack_seqnum = request.cseq;\n      }\n      this._owner.receiveRequest(request);\n    } // RFC 3261 12.2.1.1.\n  }, {\n    key: \"_createRequest\",\n    value: function _createRequest(method, extraHeaders, body) {\n      extraHeaders = Utils.cloneArray(extraHeaders);\n      if (!this._local_seqnum) {\n        this._local_seqnum = Math.floor(Math.random() * 10000);\n      }\n      var cseq = method === JsSIP_C.CANCEL || method === JsSIP_C.ACK ? this._local_seqnum : this._local_seqnum += 1;\n      var request = new SIPMessage.OutgoingRequest(method, this._remote_target, this._ua, {\n        'cseq': cseq,\n        'call_id': this._id.call_id,\n        'from_uri': this._local_uri,\n        'from_tag': this._id.local_tag,\n        'to_uri': this._remote_uri,\n        'to_tag': this._id.remote_tag,\n        'route_set': this._route_set\n      }, extraHeaders, body);\n      return request;\n    } // RFC 3261 12.2.2.\n  }, {\n    key: \"_checkInDialogRequest\",\n    value: function _checkInDialogRequest(request) {\n      var _this2 = this;\n      if (!this._remote_seqnum) {\n        this._remote_seqnum = request.cseq;\n      } else if (request.cseq < this._remote_seqnum) {\n        if (request.method === JsSIP_C.ACK) {\n          // We are not expecting any ACK with lower seqnum than the current one.\n          // Or this is not the ACK we are waiting for.\n          if (this._ack_seqnum === null || request.cseq !== this._ack_seqnum) {\n            return false;\n          }\n        } else {\n          request.reply(500);\n          return false;\n        }\n      } else if (request.cseq > this._remote_seqnum) {\n        this._remote_seqnum = request.cseq;\n      } // RFC3261 14.2 Modifying an Existing Session -UAS BEHAVIOR-.\n\n      if (request.method === JsSIP_C.INVITE || request.method === JsSIP_C.UPDATE && request.body) {\n        if (this._uac_pending_reply === true) {\n          request.reply(491);\n        } else if (this._uas_pending_reply === true) {\n          var retryAfter = (Math.random() * 10 | 0) + 1;\n          request.reply(500, null, [\"Retry-After:\".concat(retryAfter)]);\n          return false;\n        } else {\n          this._uas_pending_reply = true;\n          var stateChanged = function stateChanged() {\n            if (request.server_transaction.state === Transactions.C.STATUS_ACCEPTED || request.server_transaction.state === Transactions.C.STATUS_COMPLETED || request.server_transaction.state === Transactions.C.STATUS_TERMINATED) {\n              request.server_transaction.removeListener('stateChanged', stateChanged);\n              _this2._uas_pending_reply = false;\n            }\n          };\n          request.server_transaction.on('stateChanged', stateChanged);\n        } // RFC3261 12.2.2 Replace the dialog`s remote target URI if the request is accepted.\n\n        if (request.hasHeader('contact')) {\n          request.server_transaction.on('stateChanged', function () {\n            if (request.server_transaction.state === Transactions.C.STATUS_ACCEPTED) {\n              _this2._remote_target = request.parseHeader('contact').uri;\n            }\n          });\n        }\n      } else if (request.method === JsSIP_C.NOTIFY) {\n        // RFC6665 3.2 Replace the dialog`s remote target URI if the request is accepted.\n        if (request.hasHeader('contact')) {\n          request.server_transaction.on('stateChanged', function () {\n            if (request.server_transaction.state === Transactions.C.STATUS_COMPLETED) {\n              _this2._remote_target = request.parseHeader('contact').uri;\n            }\n          });\n        }\n      }\n      return true;\n    }\n  }, {\n    key: \"id\",\n    get: function get() {\n      return this._id;\n    }\n  }, {\n    key: \"local_seqnum\",\n    get: function get() {\n      return this._local_seqnum;\n    },\n    set: function set(num) {\n      this._local_seqnum = num;\n    }\n  }, {\n    key: \"owner\",\n    get: function get() {\n      return this._owner;\n    }\n  }, {\n    key: \"uac_pending_reply\",\n    get: function get() {\n      return this._uac_pending_reply;\n    },\n    set: function set(pending) {\n      this._uac_pending_reply = pending;\n    }\n  }, {\n    key: \"uas_pending_reply\",\n    get: function get() {\n      return this._uas_pending_reply;\n    }\n  }]);\n  return Dialog;\n}();","map":{"version":3,"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","Logger","require","SIPMessage","JsSIP_C","Transactions","Dialog_RequestSender","Utils","logger","C","STATUS_EARLY","STATUS_CONFIRMED","STATUS_TERMINATED","module","exports","Dialog","get","owner","message","type","state","arguments","undefined","_owner","_ua","_uac_pending_reply","_uas_pending_reply","hasHeader","error","IncomingResponse","status_code","contact","parseHeader","_id","call_id","local_tag","to_tag","remote_tag","from_tag","toString","_state","_remote_seqnum","cseq","_local_uri","uri","_remote_uri","_remote_target","_route_set","getHeaders","_ack_seqnum","_local_seqnum","reverse","newDialog","debug","concat","value","isTerminated","_status","update","terminate","destroyDialog","sendRequest","method","_this","options","extraHeaders","cloneArray","eventHandlers","cloneObject","body","request","_createRequest","onAuthenticated","request_sender","send","receiveRequest","_checkInDialogRequest","ACK","INVITE","Math","floor","random","CANCEL","OutgoingRequest","_this2","reply","UPDATE","retryAfter","stateChanged","server_transaction","STATUS_ACCEPTED","STATUS_COMPLETED","removeListener","on","NOTIFY","set","num","pending"],"sources":["/etc/asterisk/webrtc-phone/node_modules/jssip/lib-es5/Dialog.js"],"sourcesContent":["\"use strict\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Logger = require('./Logger');\n\nvar SIPMessage = require('./SIPMessage');\n\nvar JsSIP_C = require('./Constants');\n\nvar Transactions = require('./Transactions');\n\nvar Dialog_RequestSender = require('./Dialog/RequestSender');\n\nvar Utils = require('./Utils');\n\nvar logger = new Logger('Dialog');\nvar C = {\n  // Dialog states.\n  STATUS_EARLY: 1,\n  STATUS_CONFIRMED: 2,\n  STATUS_TERMINATED: 3\n}; // RFC 3261 12.1.\n\nmodule.exports = /*#__PURE__*/function () {\n  _createClass(Dialog, null, [{\n    key: \"C\",\n    // Expose C object.\n    get: function get() {\n      return C;\n    }\n  }]);\n\n  function Dialog(owner, message, type) {\n    var state = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : C.STATUS_CONFIRMED;\n\n    _classCallCheck(this, Dialog);\n\n    this._owner = owner;\n    this._ua = owner._ua;\n    this._uac_pending_reply = false;\n    this._uas_pending_reply = false;\n\n    if (!message.hasHeader('contact')) {\n      return {\n        error: 'unable to create a Dialog without Contact header field'\n      };\n    }\n\n    if (message instanceof SIPMessage.IncomingResponse) {\n      state = message.status_code < 200 ? C.STATUS_EARLY : C.STATUS_CONFIRMED;\n    }\n\n    var contact = message.parseHeader('contact'); // RFC 3261 12.1.1.\n\n    if (type === 'UAS') {\n      this._id = {\n        call_id: message.call_id,\n        local_tag: message.to_tag,\n        remote_tag: message.from_tag,\n        toString: function toString() {\n          return this.call_id + this.local_tag + this.remote_tag;\n        }\n      };\n      this._state = state;\n      this._remote_seqnum = message.cseq;\n      this._local_uri = message.parseHeader('to').uri;\n      this._remote_uri = message.parseHeader('from').uri;\n      this._remote_target = contact.uri;\n      this._route_set = message.getHeaders('record-route');\n      this._ack_seqnum = this._remote_seqnum;\n    } // RFC 3261 12.1.2.\n    else if (type === 'UAC') {\n        this._id = {\n          call_id: message.call_id,\n          local_tag: message.from_tag,\n          remote_tag: message.to_tag,\n          toString: function toString() {\n            return this.call_id + this.local_tag + this.remote_tag;\n          }\n        };\n        this._state = state;\n        this._local_seqnum = message.cseq;\n        this._local_uri = message.parseHeader('from').uri;\n        this._remote_uri = message.parseHeader('to').uri;\n        this._remote_target = contact.uri;\n        this._route_set = message.getHeaders('record-route').reverse();\n        this._ack_seqnum = null;\n      }\n\n    this._ua.newDialog(this);\n\n    logger.debug(\"new \".concat(type, \" dialog created with status \").concat(this._state === C.STATUS_EARLY ? 'EARLY' : 'CONFIRMED'));\n  }\n\n  _createClass(Dialog, [{\n    key: \"isTerminated\",\n    value: function isTerminated() {\n      return this._status === C.STATUS_TERMINATED;\n    }\n  }, {\n    key: \"update\",\n    value: function update(message, type) {\n      this._state = C.STATUS_CONFIRMED;\n      logger.debug(\"dialog \".concat(this._id.toString(), \"  changed to CONFIRMED state\"));\n\n      if (type === 'UAC') {\n        // RFC 3261 13.2.2.4.\n        this._route_set = message.getHeaders('record-route').reverse();\n      }\n    }\n  }, {\n    key: \"terminate\",\n    value: function terminate() {\n      logger.debug(\"dialog \".concat(this._id.toString(), \" deleted\"));\n\n      this._ua.destroyDialog(this);\n\n      this._state = C.STATUS_TERMINATED;\n    }\n  }, {\n    key: \"sendRequest\",\n    value: function sendRequest(method) {\n      var _this = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var extraHeaders = Utils.cloneArray(options.extraHeaders);\n      var eventHandlers = Utils.cloneObject(options.eventHandlers);\n      var body = options.body || null;\n\n      var request = this._createRequest(method, extraHeaders, body); // Increase the local CSeq on authentication.\n\n\n      eventHandlers.onAuthenticated = function () {\n        _this._local_seqnum += 1;\n      };\n\n      var request_sender = new Dialog_RequestSender(this, request, eventHandlers);\n      request_sender.send(); // Return the instance of OutgoingRequest.\n\n      return request;\n    }\n  }, {\n    key: \"receiveRequest\",\n    value: function receiveRequest(request) {\n      // Check in-dialog request.\n      if (!this._checkInDialogRequest(request)) {\n        return;\n      } // ACK received. Cleanup this._ack_seqnum.\n\n\n      if (request.method === JsSIP_C.ACK && this._ack_seqnum !== null) {\n        this._ack_seqnum = null;\n      } // INVITE received. Set this._ack_seqnum.\n      else if (request.method === JsSIP_C.INVITE) {\n          this._ack_seqnum = request.cseq;\n        }\n\n      this._owner.receiveRequest(request);\n    } // RFC 3261 12.2.1.1.\n\n  }, {\n    key: \"_createRequest\",\n    value: function _createRequest(method, extraHeaders, body) {\n      extraHeaders = Utils.cloneArray(extraHeaders);\n\n      if (!this._local_seqnum) {\n        this._local_seqnum = Math.floor(Math.random() * 10000);\n      }\n\n      var cseq = method === JsSIP_C.CANCEL || method === JsSIP_C.ACK ? this._local_seqnum : this._local_seqnum += 1;\n      var request = new SIPMessage.OutgoingRequest(method, this._remote_target, this._ua, {\n        'cseq': cseq,\n        'call_id': this._id.call_id,\n        'from_uri': this._local_uri,\n        'from_tag': this._id.local_tag,\n        'to_uri': this._remote_uri,\n        'to_tag': this._id.remote_tag,\n        'route_set': this._route_set\n      }, extraHeaders, body);\n      return request;\n    } // RFC 3261 12.2.2.\n\n  }, {\n    key: \"_checkInDialogRequest\",\n    value: function _checkInDialogRequest(request) {\n      var _this2 = this;\n\n      if (!this._remote_seqnum) {\n        this._remote_seqnum = request.cseq;\n      } else if (request.cseq < this._remote_seqnum) {\n        if (request.method === JsSIP_C.ACK) {\n          // We are not expecting any ACK with lower seqnum than the current one.\n          // Or this is not the ACK we are waiting for.\n          if (this._ack_seqnum === null || request.cseq !== this._ack_seqnum) {\n            return false;\n          }\n        } else {\n          request.reply(500);\n          return false;\n        }\n      } else if (request.cseq > this._remote_seqnum) {\n        this._remote_seqnum = request.cseq;\n      } // RFC3261 14.2 Modifying an Existing Session -UAS BEHAVIOR-.\n\n\n      if (request.method === JsSIP_C.INVITE || request.method === JsSIP_C.UPDATE && request.body) {\n        if (this._uac_pending_reply === true) {\n          request.reply(491);\n        } else if (this._uas_pending_reply === true) {\n          var retryAfter = (Math.random() * 10 | 0) + 1;\n          request.reply(500, null, [\"Retry-After:\".concat(retryAfter)]);\n          return false;\n        } else {\n          this._uas_pending_reply = true;\n\n          var stateChanged = function stateChanged() {\n            if (request.server_transaction.state === Transactions.C.STATUS_ACCEPTED || request.server_transaction.state === Transactions.C.STATUS_COMPLETED || request.server_transaction.state === Transactions.C.STATUS_TERMINATED) {\n              request.server_transaction.removeListener('stateChanged', stateChanged);\n              _this2._uas_pending_reply = false;\n            }\n          };\n\n          request.server_transaction.on('stateChanged', stateChanged);\n        } // RFC3261 12.2.2 Replace the dialog`s remote target URI if the request is accepted.\n\n\n        if (request.hasHeader('contact')) {\n          request.server_transaction.on('stateChanged', function () {\n            if (request.server_transaction.state === Transactions.C.STATUS_ACCEPTED) {\n              _this2._remote_target = request.parseHeader('contact').uri;\n            }\n          });\n        }\n      } else if (request.method === JsSIP_C.NOTIFY) {\n        // RFC6665 3.2 Replace the dialog`s remote target URI if the request is accepted.\n        if (request.hasHeader('contact')) {\n          request.server_transaction.on('stateChanged', function () {\n            if (request.server_transaction.state === Transactions.C.STATUS_COMPLETED) {\n              _this2._remote_target = request.parseHeader('contact').uri;\n            }\n          });\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"id\",\n    get: function get() {\n      return this._id;\n    }\n  }, {\n    key: \"local_seqnum\",\n    get: function get() {\n      return this._local_seqnum;\n    },\n    set: function set(num) {\n      this._local_seqnum = num;\n    }\n  }, {\n    key: \"owner\",\n    get: function get() {\n      return this._owner;\n    }\n  }, {\n    key: \"uac_pending_reply\",\n    get: function get() {\n      return this._uac_pending_reply;\n    },\n    set: function set(pending) {\n      this._uac_pending_reply = pending;\n    }\n  }, {\n    key: \"uas_pending_reply\",\n    get: function get() {\n      return this._uas_pending_reply;\n    }\n  }]);\n\n  return Dialog;\n}();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}