{"ast":null,"code":"\"use strict\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      var F = function F() {};\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var normalCompletion = true,\n    didErr = false,\n    err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n  return arr2;\n}\nvar Logger = require('./Logger');\nvar JsSIP_C = require('./Constants');\nvar SIPMessage = require('./SIPMessage');\nvar Utils = require('./Utils');\nvar logger = new Logger('sanityCheck'); // Checks for requests and responses.\n\nvar all = [minimumHeaders]; // Checks for requests.\n\nvar requests = [rfc3261_8_2_2_1, rfc3261_16_3_4, rfc3261_18_3_request, rfc3261_8_2_2_2]; // Checks for responses.\n\nvar responses = [rfc3261_8_1_3_3, rfc3261_18_3_response]; // local variables.\n\nvar message;\nvar ua;\nvar transport;\nmodule.exports = function (m, u, t) {\n  message = m;\n  ua = u;\n  transport = t;\n  var _iterator = _createForOfIteratorHelper(all),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _check2 = _step.value;\n      if (_check2() === false) {\n        return false;\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  if (message instanceof SIPMessage.IncomingRequest) {\n    var _iterator2 = _createForOfIteratorHelper(requests),\n      _step2;\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var check = _step2.value;\n        if (check() === false) {\n          return false;\n        }\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  } else if (message instanceof SIPMessage.IncomingResponse) {\n    var _iterator3 = _createForOfIteratorHelper(responses),\n      _step3;\n    try {\n      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n        var _check = _step3.value;\n        if (_check() === false) {\n          return false;\n        }\n      }\n    } catch (err) {\n      _iterator3.e(err);\n    } finally {\n      _iterator3.f();\n    }\n  } // Everything is OK.\n\n  return true;\n};\n/*\n * Sanity Check for incoming Messages\n *\n * Requests:\n *  - _rfc3261_8_2_2_1_ Receive a Request with a non supported URI scheme\n *  - _rfc3261_16_3_4_ Receive a Request already sent by us\n *   Does not look at via sent-by but at jssip_id, which is inserted as\n *   a prefix in all initial requests generated by the ua\n *  - _rfc3261_18_3_request_ Body Content-Length\n *  - _rfc3261_8_2_2_2_ Merged Requests\n *\n * Responses:\n *  - _rfc3261_8_1_3_3_ Multiple Via headers\n *  - _rfc3261_18_3_response_ Body Content-Length\n *\n * All:\n *  - Minimum headers in a SIP message\n */\n// Sanity Check functions for requests.\n\nfunction rfc3261_8_2_2_1() {\n  if (message.s('to').uri.scheme !== 'sip') {\n    reply(416);\n    return false;\n  }\n}\nfunction rfc3261_16_3_4() {\n  if (!message.to_tag) {\n    if (message.call_id.substr(0, 5) === ua.configuration.jssip_id) {\n      reply(482);\n      return false;\n    }\n  }\n}\nfunction rfc3261_18_3_request() {\n  var len = Utils.str_utf8_length(message.body);\n  var contentLength = message.getHeader('content-length');\n  if (len < contentLength) {\n    reply(400);\n    return false;\n  }\n}\nfunction rfc3261_8_2_2_2() {\n  var fromTag = message.from_tag;\n  var call_id = message.call_id;\n  var cseq = message.cseq;\n  var tr; // Accept any in-dialog request.\n\n  if (message.to_tag) {\n    return;\n  } // INVITE request.\n\n  if (message.method === JsSIP_C.INVITE) {\n    // If the branch matches the key of any IST then assume it is a retransmission\n    // and ignore the INVITE.\n    // TODO: we should reply the last response.\n    if (ua._transactions.ist[message.via_branch]) {\n      return false;\n    } // Otherwise check whether it is a merged request.\n    else {\n      for (var transaction in ua._transactions.ist) {\n        if (Object.prototype.hasOwnProperty.call(ua._transactions.ist, transaction)) {\n          tr = ua._transactions.ist[transaction];\n          if (tr.request.from_tag === fromTag && tr.request.call_id === call_id && tr.request.cseq === cseq) {\n            reply(482);\n            return false;\n          }\n        }\n      }\n    }\n  } // Non INVITE request.\n  // If the branch matches the key of any NIST then assume it is a retransmission\n  // and ignore the request.\n  // TODO: we should reply the last response.\n  else if (ua._transactions.nist[message.via_branch]) {\n    return false;\n  } // Otherwise check whether it is a merged request.\n  else {\n    for (var _transaction in ua._transactions.nist) {\n      if (Object.prototype.hasOwnProperty.call(ua._transactions.nist, _transaction)) {\n        tr = ua._transactions.nist[_transaction];\n        if (tr.request.from_tag === fromTag && tr.request.call_id === call_id && tr.request.cseq === cseq) {\n          reply(482);\n          return false;\n        }\n      }\n    }\n  }\n} // Sanity Check functions for responses.\n\nfunction rfc3261_8_1_3_3() {\n  if (message.getHeaders('via').length > 1) {\n    logger.debug('more than one Via header field present in the response, dropping the response');\n    return false;\n  }\n}\nfunction rfc3261_18_3_response() {\n  var len = Utils.str_utf8_length(message.body),\n    contentLength = message.getHeader('content-length');\n  if (len < contentLength) {\n    logger.debug('message body length is lower than the value in Content-Length header field, dropping the response');\n    return false;\n  }\n} // Sanity Check functions for requests and responses.\n\nfunction minimumHeaders() {\n  var mandatoryHeaders = ['from', 'to', 'call_id', 'cseq', 'via'];\n  for (var _i = 0, _mandatoryHeaders = mandatoryHeaders; _i < _mandatoryHeaders.length; _i++) {\n    var header = _mandatoryHeaders[_i];\n    if (!message.hasHeader(header)) {\n      logger.debug(\"missing mandatory header field : \".concat(header, \", dropping the response\"));\n      return false;\n    }\n  }\n} // Reply.\n\nfunction reply(status_code) {\n  var vias = message.getHeaders('via');\n  var to;\n  var response = \"SIP/2.0 \".concat(status_code, \" \").concat(JsSIP_C.REASON_PHRASE[status_code], \"\\r\\n\");\n  var _iterator4 = _createForOfIteratorHelper(vias),\n    _step4;\n  try {\n    for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n      var via = _step4.value;\n      response += \"Via: \".concat(via, \"\\r\\n\");\n    }\n  } catch (err) {\n    _iterator4.e(err);\n  } finally {\n    _iterator4.f();\n  }\n  to = message.getHeader('To');\n  if (!message.to_tag) {\n    to += \";tag=\".concat(Utils.newTag());\n  }\n  response += \"To: \".concat(to, \"\\r\\n\");\n  response += \"From: \".concat(message.getHeader('From'), \"\\r\\n\");\n  response += \"Call-ID: \".concat(message.call_id, \"\\r\\n\");\n  response += \"CSeq: \".concat(message.cseq, \" \").concat(message.method, \"\\r\\n\");\n  response += '\\r\\n';\n  transport.send(response);\n}","map":{"version":3,"names":["_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","normalCompletion","didErr","err","step","next","_e2","minLen","_arrayLikeToArray","Object","prototype","toString","call","slice","constructor","name","from","test","arr","len","arr2","Logger","require","JsSIP_C","SIPMessage","Utils","logger","all","minimumHeaders","requests","rfc3261_8_2_2_1","rfc3261_16_3_4","rfc3261_18_3_request","rfc3261_8_2_2_2","responses","rfc3261_8_1_3_3","rfc3261_18_3_response","message","ua","transport","module","exports","m","u","t","_iterator","_step","_check2","IncomingRequest","_iterator2","_step2","check","IncomingResponse","_iterator3","_step3","_check","uri","scheme","reply","to_tag","call_id","substr","configuration","jssip_id","str_utf8_length","body","contentLength","getHeader","fromTag","from_tag","cseq","tr","method","INVITE","_transactions","ist","via_branch","transaction","hasOwnProperty","request","nist","_transaction","getHeaders","debug","mandatoryHeaders","_i","_mandatoryHeaders","header","hasHeader","concat","status_code","vias","to","response","REASON_PHRASE","_iterator4","_step4","via","newTag","send"],"sources":["/etc/asterisk/webrtc-phone/node_modules/jssip/lib-es5/sanityCheck.js"],"sourcesContent":["\"use strict\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar Logger = require('./Logger');\n\nvar JsSIP_C = require('./Constants');\n\nvar SIPMessage = require('./SIPMessage');\n\nvar Utils = require('./Utils');\n\nvar logger = new Logger('sanityCheck'); // Checks for requests and responses.\n\nvar all = [minimumHeaders]; // Checks for requests.\n\nvar requests = [rfc3261_8_2_2_1, rfc3261_16_3_4, rfc3261_18_3_request, rfc3261_8_2_2_2]; // Checks for responses.\n\nvar responses = [rfc3261_8_1_3_3, rfc3261_18_3_response]; // local variables.\n\nvar message;\nvar ua;\nvar transport;\n\nmodule.exports = function (m, u, t) {\n  message = m;\n  ua = u;\n  transport = t;\n\n  var _iterator = _createForOfIteratorHelper(all),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _check2 = _step.value;\n\n      if (_check2() === false) {\n        return false;\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  if (message instanceof SIPMessage.IncomingRequest) {\n    var _iterator2 = _createForOfIteratorHelper(requests),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var check = _step2.value;\n\n        if (check() === false) {\n          return false;\n        }\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  } else if (message instanceof SIPMessage.IncomingResponse) {\n    var _iterator3 = _createForOfIteratorHelper(responses),\n        _step3;\n\n    try {\n      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n        var _check = _step3.value;\n\n        if (_check() === false) {\n          return false;\n        }\n      }\n    } catch (err) {\n      _iterator3.e(err);\n    } finally {\n      _iterator3.f();\n    }\n  } // Everything is OK.\n\n\n  return true;\n};\n/*\n * Sanity Check for incoming Messages\n *\n * Requests:\n *  - _rfc3261_8_2_2_1_ Receive a Request with a non supported URI scheme\n *  - _rfc3261_16_3_4_ Receive a Request already sent by us\n *   Does not look at via sent-by but at jssip_id, which is inserted as\n *   a prefix in all initial requests generated by the ua\n *  - _rfc3261_18_3_request_ Body Content-Length\n *  - _rfc3261_8_2_2_2_ Merged Requests\n *\n * Responses:\n *  - _rfc3261_8_1_3_3_ Multiple Via headers\n *  - _rfc3261_18_3_response_ Body Content-Length\n *\n * All:\n *  - Minimum headers in a SIP message\n */\n// Sanity Check functions for requests.\n\n\nfunction rfc3261_8_2_2_1() {\n  if (message.s('to').uri.scheme !== 'sip') {\n    reply(416);\n    return false;\n  }\n}\n\nfunction rfc3261_16_3_4() {\n  if (!message.to_tag) {\n    if (message.call_id.substr(0, 5) === ua.configuration.jssip_id) {\n      reply(482);\n      return false;\n    }\n  }\n}\n\nfunction rfc3261_18_3_request() {\n  var len = Utils.str_utf8_length(message.body);\n  var contentLength = message.getHeader('content-length');\n\n  if (len < contentLength) {\n    reply(400);\n    return false;\n  }\n}\n\nfunction rfc3261_8_2_2_2() {\n  var fromTag = message.from_tag;\n  var call_id = message.call_id;\n  var cseq = message.cseq;\n  var tr; // Accept any in-dialog request.\n\n  if (message.to_tag) {\n    return;\n  } // INVITE request.\n\n\n  if (message.method === JsSIP_C.INVITE) {\n    // If the branch matches the key of any IST then assume it is a retransmission\n    // and ignore the INVITE.\n    // TODO: we should reply the last response.\n    if (ua._transactions.ist[message.via_branch]) {\n      return false;\n    } // Otherwise check whether it is a merged request.\n    else {\n        for (var transaction in ua._transactions.ist) {\n          if (Object.prototype.hasOwnProperty.call(ua._transactions.ist, transaction)) {\n            tr = ua._transactions.ist[transaction];\n\n            if (tr.request.from_tag === fromTag && tr.request.call_id === call_id && tr.request.cseq === cseq) {\n              reply(482);\n              return false;\n            }\n          }\n        }\n      }\n  } // Non INVITE request.\n  // If the branch matches the key of any NIST then assume it is a retransmission\n  // and ignore the request.\n  // TODO: we should reply the last response.\n  else if (ua._transactions.nist[message.via_branch]) {\n      return false;\n    } // Otherwise check whether it is a merged request.\n    else {\n        for (var _transaction in ua._transactions.nist) {\n          if (Object.prototype.hasOwnProperty.call(ua._transactions.nist, _transaction)) {\n            tr = ua._transactions.nist[_transaction];\n\n            if (tr.request.from_tag === fromTag && tr.request.call_id === call_id && tr.request.cseq === cseq) {\n              reply(482);\n              return false;\n            }\n          }\n        }\n      }\n} // Sanity Check functions for responses.\n\n\nfunction rfc3261_8_1_3_3() {\n  if (message.getHeaders('via').length > 1) {\n    logger.debug('more than one Via header field present in the response, dropping the response');\n    return false;\n  }\n}\n\nfunction rfc3261_18_3_response() {\n  var len = Utils.str_utf8_length(message.body),\n      contentLength = message.getHeader('content-length');\n\n  if (len < contentLength) {\n    logger.debug('message body length is lower than the value in Content-Length header field, dropping the response');\n    return false;\n  }\n} // Sanity Check functions for requests and responses.\n\n\nfunction minimumHeaders() {\n  var mandatoryHeaders = ['from', 'to', 'call_id', 'cseq', 'via'];\n\n  for (var _i = 0, _mandatoryHeaders = mandatoryHeaders; _i < _mandatoryHeaders.length; _i++) {\n    var header = _mandatoryHeaders[_i];\n\n    if (!message.hasHeader(header)) {\n      logger.debug(\"missing mandatory header field : \".concat(header, \", dropping the response\"));\n      return false;\n    }\n  }\n} // Reply.\n\n\nfunction reply(status_code) {\n  var vias = message.getHeaders('via');\n  var to;\n  var response = \"SIP/2.0 \".concat(status_code, \" \").concat(JsSIP_C.REASON_PHRASE[status_code], \"\\r\\n\");\n\n  var _iterator4 = _createForOfIteratorHelper(vias),\n      _step4;\n\n  try {\n    for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n      var via = _step4.value;\n      response += \"Via: \".concat(via, \"\\r\\n\");\n    }\n  } catch (err) {\n    _iterator4.e(err);\n  } finally {\n    _iterator4.f();\n  }\n\n  to = message.getHeader('To');\n\n  if (!message.to_tag) {\n    to += \";tag=\".concat(Utils.newTag());\n  }\n\n  response += \"To: \".concat(to, \"\\r\\n\");\n  response += \"From: \".concat(message.getHeader('From'), \"\\r\\n\");\n  response += \"Call-ID: \".concat(message.call_id, \"\\r\\n\");\n  response += \"CSeq: \".concat(message.cseq, \" \").concat(message.method, \"\\r\\n\");\n  response += '\\r\\n';\n  transport.send(response);\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}