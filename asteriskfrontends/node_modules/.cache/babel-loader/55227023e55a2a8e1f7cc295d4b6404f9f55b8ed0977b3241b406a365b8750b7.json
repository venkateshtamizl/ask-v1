{"ast":null,"code":"var _jsxFileName = \"/app/src/components/AsteriskWebRTCPhone.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from \"react\";\nimport JsSIP from \"jssip\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nJsSIP.debug.enable(\"JsSIP:*\");\nconst LOCAL_STORAGE_KEY = \"webrtc_extensions\";\nconst CALL_LOG_KEY = \"webrtc_call_logs\";\nconst defaultExtensions = [{\n  number: \"9008\",\n  label: \"SIP Phone\",\n  status: \"online\"\n}, {\n  number: \"93017\",\n  label: \"Zenitel\",\n  status: \"offline\"\n}, {\n  number: \"9002\",\n  label: \"Operator\",\n  status: \"online\"\n}, {\n  number: \"9003\",\n  label: \"Security\",\n  status: \"offline\"\n}];\nconst WebRTCPhone = () => {\n  _s();\n  const [ua, setUa] = useState(null);\n  const [session, setSession] = useState(null);\n  const [target, setTarget] = useState(\"\");\n  const [status, setStatus] = useState(\"üî¥ Offline\");\n  const [incomingSession, setIncomingSession] = useState(null);\n  const [caller, setCaller] = useState(\"\");\n  const [callStartTime, setCallStartTime] = useState(null);\n  const [callDuration, setCallDuration] = useState(\"00:00\");\n  const [editMode, setEditMode] = useState(false);\n  const [extensions, setExtensions] = useState(() => {\n    const stored = localStorage.getItem(LOCAL_STORAGE_KEY);\n    return stored ? JSON.parse(stored) : defaultExtensions;\n  });\n  const [showLogs, setShowLogs] = useState(false);\n  const [callLogs, setCallLogs] = useState(() => {\n    const stored = localStorage.getItem(CALL_LOG_KEY);\n    return stored ? JSON.parse(stored) : [];\n  });\n  const [newExt, setNewExt] = useState(\"\");\n  const [newLabel, setNewLabel] = useState(\"\");\n  const durationInterval = useRef(null);\n  const ringtoneRef = useRef(null);\n  const remoteAudioRef = useRef(null);\n  useEffect(() => {\n    const socket = new JsSIP.WebSocketInterface(\"wss://10.30.250.50:8089/ws\");\n    const configuration = {\n      sockets: [socket],\n      uri: \"sip:9001@10.30.250.50\",\n      password: \"1234\",\n      display_name: \"WebRTC Client\",\n      session_timers: false,\n      register: true\n    };\n    const userAgent = new JsSIP.UA(configuration);\n    setUa(userAgent);\n    userAgent.start();\n    userAgent.on(\"registered\", () => setStatus(\"üü¢ Online\"));\n    userAgent.on(\"registrationFailed\", () => setStatus(\"üî¥ Offline\"));\n    userAgent.on(\"disconnected\", () => setStatus(\"üî¥ Offline\"));\n    userAgent.on(\"newRTCSession\", ({\n      originator,\n      session\n    }) => {\n      if (originator === \"remote\") {\n        var _ringtoneRef$current;\n        setCaller(session.remote_identity.uri.toString());\n        setIncomingSession(session);\n        (_ringtoneRef$current = ringtoneRef.current) === null || _ringtoneRef$current === void 0 ? void 0 : _ringtoneRef$current.play();\n        attachRemoteStream(session);\n        sessionEvents(session, session.remote_identity.uri.user, \"Me\");\n      }\n    });\n    return () => userAgent.stop();\n  }, []);\n  const attachRemoteStream = session => {\n    session.connection.addEventListener(\"track\", e => {\n      if (remoteAudioRef.current && e.streams.length > 0) {\n        remoteAudioRef.current.srcObject = e.streams[0];\n      }\n    });\n  };\n  const sessionEvents = (session, from, to) => {\n    session.on(\"accepted\", () => {\n      setStatus(\"üìû In Call\");\n      stopRingtone();\n      const now = Date.now();\n      setCallStartTime(now);\n      startTimer(now);\n    });\n    session.on(\"ended\", () => {\n      const duration = callDuration;\n      logCall({\n        from,\n        to,\n        duration\n      });\n      endCall();\n    });\n    session.on(\"failed\", () => {\n      const duration = callDuration;\n      logCall({\n        from,\n        to,\n        duration\n      });\n      endCall();\n    });\n  };\n  const logCall = ({\n    from,\n    to,\n    duration\n  }) => {\n    const log = {\n      from,\n      to,\n      duration,\n      timestamp: new Date().toLocaleString()\n    };\n    const updatedLogs = [log, ...callLogs];\n    setCallLogs(updatedLogs);\n    localStorage.setItem(CALL_LOG_KEY, JSON.stringify(updatedLogs));\n  };\n  const startTimer = startTime => {\n    stopTimer();\n    durationInterval.current = setInterval(() => {\n      const seconds = Math.floor((Date.now() - startTime) / 1000);\n      const mins = String(Math.floor(seconds / 60)).padStart(2, \"0\");\n      const secs = String(seconds % 60).padStart(2, \"0\");\n      setCallDuration(`${mins}:${secs}`);\n    }, 1000);\n  };\n  const stopTimer = () => {\n    clearInterval(durationInterval.current);\n    setCallDuration(\"00:00\");\n    setCallStartTime(null);\n  };\n  const stopRingtone = () => {\n    if (ringtoneRef.current) {\n      ringtoneRef.current.pause();\n      ringtoneRef.current.currentTime = 0;\n    }\n  };\n  const endCall = () => {\n    stopTimer();\n    stopRingtone();\n    setStatus(\"üü¢ Online\");\n    setIncomingSession(null);\n    setSession(null);\n    setCaller(\"\");\n    if (remoteAudioRef.current) remoteAudioRef.current.srcObject = null;\n  };\n  const handleCall = () => {\n    if (!ua || !ua.isRegistered()) return alert(\"‚ùå SIP not connected.\");\n    if (!target) return alert(\"Select an extension!\");\n    setStatus(`üì≤ Dialing ${target}...`);\n    const newSession = ua.call(`sip:${target}@10.30.250.50`, {\n      mediaConstraints: {\n        audio: true,\n        video: false\n      }\n    });\n    attachRemoteStream(newSession);\n    sessionEvents(newSession, \"Me\", target);\n    setSession(newSession);\n  };\n  const handleAnswer = () => {\n    if (!incomingSession) return;\n    incomingSession.answer({\n      mediaConstraints: {\n        audio: true,\n        video: false\n      }\n    });\n    attachRemoteStream(incomingSession);\n    sessionEvents(incomingSession, caller, \"Me\");\n    setSession(incomingSession);\n    setIncomingSession(null);\n  };\n  const handleReject = () => {\n    incomingSession === null || incomingSession === void 0 ? void 0 : incomingSession.terminate();\n    stopRingtone();\n    setIncomingSession(null);\n  };\n  const handleHangup = () => {\n    session === null || session === void 0 ? void 0 : session.terminate();\n    endCall();\n  };\n  const handleEditLabel = (index, newLabel) => {\n    const updated = [...extensions];\n    updated[index].label = newLabel;\n    setExtensions(updated);\n    localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(updated));\n  };\n  const handleAddExtension = () => {\n    if (!newExt || !newLabel) return;\n    const updated = [...extensions, {\n      number: newExt,\n      label: newLabel,\n      status: \"offline\"\n    }];\n    setExtensions(updated);\n    localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(updated));\n    setNewExt(\"\");\n    setNewLabel(\"\");\n  };\n  const handleDeleteExtension = number => {\n    const updated = extensions.filter(ext => ext.number !== number);\n    setExtensions(updated);\n    localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(updated));\n    if (target === number) setTarget(\"\");\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"fixed\",\n        top: 10,\n        right: 10,\n        background: \"#fff\",\n        padding: \"12px 20px\",\n        boxShadow: \"0 3px 12px rgba(0,0,0,0.1)\",\n        borderRadius: \"12px\",\n        display: \"flex\",\n        alignItems: \"center\",\n        gap: 12,\n        zIndex: 9999,\n        fontFamily: \"Arial\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          padding: \"5px 12px\",\n          background: \"#eee\",\n          borderRadius: 10,\n          fontWeight: 600,\n          fontSize: 14\n        },\n        children: status\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setEditMode(!editMode),\n        style: {\n          fontSize: 13,\n          padding: \"4px 8px\",\n          background: \"#f0f0f0\",\n          border: \"1px solid #ccc\",\n          borderRadius: \"6px\",\n          cursor: \"pointer\"\n        },\n        children: editMode ? \"‚úÖ\" : \"‚úèÔ∏è\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this), !editMode ? /*#__PURE__*/_jsxDEV(\"select\", {\n        value: target,\n        onChange: e => setTarget(e.target.value),\n        style: {\n          padding: \"6px 10px\",\n          borderRadius: 6,\n          border: \"1px solid #ccc\",\n          fontSize: 14\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Select Extension\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 13\n        }, this), extensions.map(ext => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: ext.number,\n          children: [ext.number, \" - \", ext.label]\n        }, ext.number, true, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          flexDirection: \"column\",\n          gap: 8\n        },\n        children: [extensions.map((ext, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            alignItems: \"center\",\n            gap: 6\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: ext.number\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: ext.label,\n            onChange: e => handleEditLabel(i, e.target.value),\n            style: {\n              padding: \"4px 8px\",\n              border: \"1px solid #ccc\",\n              borderRadius: 6\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDeleteExtension(ext.number),\n            style: {\n              background: \"#ff4d4f\",\n              color: \"#fff\",\n              border: \"none\",\n              borderRadius: 6,\n              padding: \"2px 8px\",\n              cursor: \"pointer\"\n            },\n            children: \"\\uD83D\\uDDD1\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 17\n          }, this)]\n        }, ext.number, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 15\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            alignItems: \"center\",\n            gap: 6\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"Ext\",\n            value: newExt,\n            onChange: e => setNewExt(e.target.value),\n            style: {\n              padding: \"4px 6px\",\n              width: 60,\n              border: \"1px solid #ccc\",\n              borderRadius: 6\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"Label\",\n            value: newLabel,\n            onChange: e => setNewLabel(e.target.value),\n            style: {\n              padding: \"4px 6px\",\n              width: 120,\n              border: \"1px solid #ccc\",\n              borderRadius: 6\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleAddExtension,\n            style: {\n              padding: \"4px 10px\",\n              background: \"#4caf50\",\n              color: \"#fff\",\n              border: \"none\",\n              borderRadius: 6,\n              cursor: \"pointer\"\n            },\n            children: \"\\u2795 Add\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 11\n      }, this), status === \"üìû In Call\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: 14,\n          fontWeight: \"bold\",\n          padding: \"6px 12px\",\n          background: \"#f7f7f7\",\n          borderRadius: 8,\n          border: \"1px solid #ddd\"\n        },\n        children: [\"\\u23F1 \", callDuration]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"/call.png\",\n        alt: \"Call\",\n        onClick: handleCall,\n        style: {\n          width: 35,\n          height: 35,\n          cursor: \"pointer\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"/hangup.png\",\n        alt: \"Hangup\",\n        onClick: handleHangup,\n        style: {\n          width: 32,\n          height: 32,\n          cursor: \"pointer\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowLogs(!showLogs),\n        style: {\n          background: \"#f9f9f9\",\n          border: \"1px solid #ddd\",\n          padding: \"6px 12px\",\n          borderRadius: 6,\n          cursor: \"pointer\",\n          fontWeight: \"bold\"\n        },\n        children: \"\\uD83D\\uDCDC Call History\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this), showLogs && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"fixed\",\n        top: 70,\n        right: 10,\n        background: \"#fff\",\n        padding: 16,\n        boxShadow: \"0 3px 10px rgba(0,0,0,0.15)\",\n        borderRadius: 10,\n        width: 280,\n        fontFamily: \"Arial\",\n        maxHeight: 300,\n        overflowY: \"auto\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        style: {\n          margin: 0,\n          marginBottom: 10\n        },\n        children: \"\\uD83D\\uDCCB Call Logs\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 11\n      }, this), callLogs.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No calls yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 37\n      }, this), callLogs.map((log, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 12,\n          borderBottom: \"1px solid #eee\",\n          paddingBottom: 6\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: log.from\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 20\n          }, this), \" \\u27A1\\uFE0F \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: log.to\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 41\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"\\u23F1 \", log.duration]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"\\uD83D\\uDD52 \", log.timestamp]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 15\n        }, this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 9\n    }, this), incomingSession && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"fixed\",\n        top: 100,\n        right: 20,\n        background: \"#fff\",\n        padding: 16,\n        boxShadow: \"0 2px 6px rgba(0,0,0,0.2)\",\n        borderRadius: 10\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\uD83D\\uDCDE Incoming call from: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: caller\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 37\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleAnswer,\n        style: {\n          marginRight: 10\n        },\n        children: \"\\u2705 Answer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleReject,\n        children: \"\\u274C Reject\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n      ref: remoteAudioRef,\n      autoPlay: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n      ref: ringtoneRef,\n      src: \"/ringtone.mp3\",\n      loop: true,\n      preload: \"auto\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(WebRTCPhone, \"kUp7ON364eT062QBoSQNeA1W690=\");\n_c = WebRTCPhone;\nexport default WebRTCPhone;\nvar _c;\n$RefreshReg$(_c, \"WebRTCPhone\");","map":{"version":3,"names":["React","useEffect","useState","useRef","JsSIP","jsxDEV","_jsxDEV","Fragment","_Fragment","debug","enable","LOCAL_STORAGE_KEY","CALL_LOG_KEY","defaultExtensions","number","label","status","WebRTCPhone","_s","ua","setUa","session","setSession","target","setTarget","setStatus","incomingSession","setIncomingSession","caller","setCaller","callStartTime","setCallStartTime","callDuration","setCallDuration","editMode","setEditMode","extensions","setExtensions","stored","localStorage","getItem","JSON","parse","showLogs","setShowLogs","callLogs","setCallLogs","newExt","setNewExt","newLabel","setNewLabel","durationInterval","ringtoneRef","remoteAudioRef","socket","WebSocketInterface","configuration","sockets","uri","password","display_name","session_timers","register","userAgent","UA","start","on","originator","_ringtoneRef$current","remote_identity","toString","current","play","attachRemoteStream","sessionEvents","user","stop","connection","addEventListener","e","streams","length","srcObject","from","to","stopRingtone","now","Date","startTimer","duration","logCall","endCall","log","timestamp","toLocaleString","updatedLogs","setItem","stringify","startTime","stopTimer","setInterval","seconds","Math","floor","mins","String","padStart","secs","clearInterval","pause","currentTime","handleCall","isRegistered","alert","newSession","call","mediaConstraints","audio","video","handleAnswer","answer","handleReject","terminate","handleHangup","handleEditLabel","index","updated","handleAddExtension","handleDeleteExtension","filter","ext","children","style","position","top","right","background","padding","boxShadow","borderRadius","display","alignItems","gap","zIndex","fontFamily","fontWeight","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","onClick","border","cursor","value","onChange","map","flexDirection","i","type","color","placeholder","width","src","alt","height","maxHeight","overflowY","margin","marginBottom","borderBottom","paddingBottom","marginRight","ref","autoPlay","loop","preload","_c","$RefreshReg$"],"sources":["/app/src/components/AsteriskWebRTCPhone.jsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport JsSIP from \"jssip\";\nJsSIP.debug.enable(\"JsSIP:*\");\nconst LOCAL_STORAGE_KEY = \"webrtc_extensions\";\nconst CALL_LOG_KEY = \"webrtc_call_logs\";\nconst defaultExtensions = [\n  { number: \"9008\", label: \"SIP Phone\", status: \"online\" },\n  { number: \"93017\", label: \"Zenitel\", status: \"offline\" },\n  { number: \"9002\", label: \"Operator\", status: \"online\" },\n  { number: \"9003\", label: \"Security\", status: \"offline\" },\n];\nconst WebRTCPhone = () => {\n  const [ua, setUa] = useState(null);\n  const [session, setSession] = useState(null);\n  const [target, setTarget] = useState(\"\");\n  const [status, setStatus] = useState(\"üî¥ Offline\");\n  const [incomingSession, setIncomingSession] = useState(null);\n  const [caller, setCaller] = useState(\"\");\n  const [callStartTime, setCallStartTime] = useState(null);\n  const [callDuration, setCallDuration] = useState(\"00:00\");\n  const [editMode, setEditMode] = useState(false);\n  const [extensions, setExtensions] = useState(() => {\n    const stored = localStorage.getItem(LOCAL_STORAGE_KEY);\n    return stored ? JSON.parse(stored) : defaultExtensions;\n  });\n  const [showLogs, setShowLogs] = useState(false);\n  const [callLogs, setCallLogs] = useState(() => {\n    const stored = localStorage.getItem(CALL_LOG_KEY);\n    return stored ? JSON.parse(stored) : [];\n  });\n  const [newExt, setNewExt] = useState(\"\");\n  const [newLabel, setNewLabel] = useState(\"\");\n  const durationInterval = useRef(null);\n  const ringtoneRef = useRef(null);\n  const remoteAudioRef = useRef(null);\n  useEffect(() => {\n    const socket = new JsSIP.WebSocketInterface(\"wss://10.30.250.50:8089/ws\");\n    const configuration = {\n      sockets: [socket],\n      uri: \"sip:9001@10.30.250.50\",\n      password: \"1234\",\n      display_name: \"WebRTC Client\",\n      session_timers: false,\n      register: true,\n    };\n    const userAgent = new JsSIP.UA(configuration);\n    setUa(userAgent);\n    userAgent.start();\n    userAgent.on(\"registered\", () => setStatus(\"üü¢ Online\"));\n    userAgent.on(\"registrationFailed\", () => setStatus(\"üî¥ Offline\"));\n    userAgent.on(\"disconnected\", () => setStatus(\"üî¥ Offline\"));\n    userAgent.on(\"newRTCSession\", ({ originator, session }) => {\n      if (originator === \"remote\") {\n        setCaller(session.remote_identity.uri.toString());\n        setIncomingSession(session);\n        ringtoneRef.current?.play();\n        attachRemoteStream(session);\n        sessionEvents(session, session.remote_identity.uri.user, \"Me\");\n      }\n    });\n    return () => userAgent.stop();\n  }, []);\n  const attachRemoteStream = (session) => {\n    session.connection.addEventListener(\"track\", (e) => {\n      if (remoteAudioRef.current && e.streams.length > 0) {\n        remoteAudioRef.current.srcObject = e.streams[0];\n      }\n    });\n  };\n  const sessionEvents = (session, from, to) => {\n    session.on(\"accepted\", () => {\n      setStatus(\"üìû In Call\");\n      stopRingtone();\n      const now = Date.now();\n      setCallStartTime(now);\n      startTimer(now);\n    });\n    session.on(\"ended\", () => {\n      const duration = callDuration;\n      logCall({ from, to, duration });\n      endCall();\n    });\n    session.on(\"failed\", () => {\n      const duration = callDuration;\n      logCall({ from, to, duration });\n      endCall();\n    });\n  };\n  const logCall = ({ from, to, duration }) => {\n    const log = {\n      from,\n      to,\n      duration,\n      timestamp: new Date().toLocaleString(),\n    };\n    const updatedLogs = [log, ...callLogs];\n    setCallLogs(updatedLogs);\n    localStorage.setItem(CALL_LOG_KEY, JSON.stringify(updatedLogs));\n  };\n  const startTimer = (startTime) => {\n    stopTimer();\n    durationInterval.current = setInterval(() => {\n      const seconds = Math.floor((Date.now() - startTime) / 1000);\n      const mins = String(Math.floor(seconds / 60)).padStart(2, \"0\");\n      const secs = String(seconds % 60).padStart(2, \"0\");\n      setCallDuration(`${mins}:${secs}`);\n    }, 1000);\n  };\n  const stopTimer = () => {\n    clearInterval(durationInterval.current);\n    setCallDuration(\"00:00\");\n    setCallStartTime(null);\n  };\n  const stopRingtone = () => {\n    if (ringtoneRef.current) {\n      ringtoneRef.current.pause();\n      ringtoneRef.current.currentTime = 0;\n    }\n  };\n  const endCall = () => {\n    stopTimer();\n    stopRingtone();\n    setStatus(\"üü¢ Online\");\n    setIncomingSession(null);\n    setSession(null);\n    setCaller(\"\");\n    if (remoteAudioRef.current) remoteAudioRef.current.srcObject = null;\n  };\n  const handleCall = () => {\n    if (!ua || !ua.isRegistered()) return alert(\"‚ùå SIP not connected.\");\n    if (!target) return alert(\"Select an extension!\");\n    setStatus(`üì≤ Dialing ${target}...`);\n    const newSession = ua.call(`sip:${target}@10.30.250.50`, {\n      mediaConstraints: { audio: true, video: false },\n    });\n    attachRemoteStream(newSession);\n    sessionEvents(newSession, \"Me\", target);\n    setSession(newSession);\n  };\n  const handleAnswer = () => {\n    if (!incomingSession) return;\n    incomingSession.answer({ mediaConstraints: { audio: true, video: false } });\n    attachRemoteStream(incomingSession);\n    sessionEvents(incomingSession, caller, \"Me\");\n    setSession(incomingSession);\n    setIncomingSession(null);\n  };\n  const handleReject = () => {\n    incomingSession?.terminate();\n    stopRingtone();\n    setIncomingSession(null);\n  };\n  const handleHangup = () => {\n    session?.terminate();\n    endCall();\n  };\n  const handleEditLabel = (index, newLabel) => {\n    const updated = [...extensions];\n    updated[index].label = newLabel;\n    setExtensions(updated);\n    localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(updated));\n  };\n  const handleAddExtension = () => {\n    if (!newExt || !newLabel) return;\n    const updated = [...extensions, { number: newExt, label: newLabel, status: \"offline\" }];\n    setExtensions(updated);\n    localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(updated));\n    setNewExt(\"\");\n    setNewLabel(\"\");\n  };\n  const handleDeleteExtension = (number) => {\n    const updated = extensions.filter(ext => ext.number !== number);\n    setExtensions(updated);\n    localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(updated));\n    if (target === number) setTarget(\"\");\n  };\n  return (\n    <>\n      <div style={{\n        position: \"fixed\", top: 10, right: 10, background: \"#fff\",\n        padding: \"12px 20px\", boxShadow: \"0 3px 12px rgba(0,0,0,0.1)\",\n        borderRadius: \"12px\", display: \"flex\", alignItems: \"center\",\n        gap: 12, zIndex: 9999, fontFamily: \"Arial\"\n      }}>\n        <span style={{\n          padding: \"5px 12px\", background: \"#eee\", borderRadius: 10,\n          fontWeight: 600, fontSize: 14\n        }}>{status}</span>\n        <button onClick={() => setEditMode(!editMode)} style={{\n          fontSize: 13, padding: \"4px 8px\", background: \"#f0f0f0\",\n          border: \"1px solid #ccc\", borderRadius: \"6px\", cursor: \"pointer\"\n        }}>\n          {editMode ? \"‚úÖ\" : \"‚úèÔ∏è\"}\n        </button>\n        {!editMode ? (\n          <select value={target} onChange={(e) => setTarget(e.target.value)} style={{\n            padding: \"6px 10px\", borderRadius: 6, border: \"1px solid #ccc\", fontSize: 14\n          }}>\n            <option value=\"\">Select Extension</option>\n            {extensions.map(ext => (\n              <option key={ext.number} value={ext.number}>\n                {ext.number} - {ext.label}\n              </option>\n            ))}\n          </select>\n        ) : (\n          <div style={{ display: \"flex\", flexDirection: \"column\", gap: 8 }}>\n            {extensions.map((ext, i) => (\n              <div key={ext.number} style={{ display: \"flex\", alignItems: \"center\", gap: 6 }}>\n                <b>{ext.number}</b>\n                <input type=\"text\" value={ext.label} onChange={(e) => handleEditLabel(i, e.target.value)}\n                       style={{ padding: \"4px 8px\", border: \"1px solid #ccc\", borderRadius: 6 }} />\n                <button onClick={() => handleDeleteExtension(ext.number)} style={{\n                  background: \"#ff4d4f\", color: \"#fff\", border: \"none\",\n                  borderRadius: 6, padding: \"2px 8px\", cursor: \"pointer\"\n                }}>üóëÔ∏è</button>\n              </div>\n            ))}\n            <div style={{ display: \"flex\", alignItems: \"center\", gap: 6 }}>\n              <input placeholder=\"Ext\" value={newExt} onChange={(e) => setNewExt(e.target.value)}\n                     style={{ padding: \"4px 6px\", width: 60, border: \"1px solid #ccc\", borderRadius: 6 }} />\n              <input placeholder=\"Label\" value={newLabel} onChange={(e) => setNewLabel(e.target.value)}\n                     style={{ padding: \"4px 6px\", width: 120, border: \"1px solid #ccc\", borderRadius: 6 }} />\n              <button onClick={handleAddExtension} style={{\n                padding: \"4px 10px\", background: \"#4caf50\", color: \"#fff\",\n                border: \"none\", borderRadius: 6, cursor: \"pointer\"\n              }}>‚ûï Add</button>\n            </div>\n          </div>\n        )}\n        {status === \"üìû In Call\" && (\n          <div style={{\n            fontSize: 14, fontWeight: \"bold\", padding: \"6px 12px\",\n            background: \"#f7f7f7\", borderRadius: 8, border: \"1px solid #ddd\"\n          }}>\n            ‚è± {callDuration}\n          </div>\n        )}\n        <img src=\"/call.png\" alt=\"Call\" onClick={handleCall}\n             style={{ width: 35, height: 35, cursor: \"pointer\" }} />\n        <img src=\"/hangup.png\" alt=\"Hangup\" onClick={handleHangup}\n             style={{ width: 32, height: 32, cursor: \"pointer\" }} />\n        <button onClick={() => setShowLogs(!showLogs)} style={{\n          background: \"#f9f9f9\", border: \"1px solid #ddd\", padding: \"6px 12px\",\n          borderRadius: 6, cursor: \"pointer\", fontWeight: \"bold\"\n        }}>\n          üìú Call History\n        </button>\n      </div>\n      {showLogs && (\n        <div style={{\n          position: \"fixed\", top: 70, right: 10, background: \"#fff\",\n          padding: 16, boxShadow: \"0 3px 10px rgba(0,0,0,0.15)\",\n          borderRadius: 10, width: 280, fontFamily: \"Arial\", maxHeight: 300, overflowY: \"auto\"\n        }}>\n          <h4 style={{ margin: 0, marginBottom: 10 }}>üìã Call Logs</h4>\n          {callLogs.length === 0 && <p>No calls yet.</p>}\n          {callLogs.map((log, i) => (\n            <div key={i} style={{ marginBottom: 12, borderBottom: \"1px solid #eee\", paddingBottom: 6 }}>\n              <div><b>{log.from}</b> ‚û°Ô∏è <b>{log.to}</b></div>\n              <div>‚è± {log.duration}</div>\n              <div>üïí {log.timestamp}</div>\n            </div>\n          ))}\n        </div>\n      )}\n      {incomingSession && (\n        <div style={{\n          position: \"fixed\", top: 100, right: 20, background: \"#fff\",\n          padding: 16, boxShadow: \"0 2px 6px rgba(0,0,0,0.2)\", borderRadius: 10\n        }}>\n          <p>üìû Incoming call from: <strong>{caller}</strong></p>\n          <button onClick={handleAnswer} style={{ marginRight: 10 }}>‚úÖ Answer</button>\n          <button onClick={handleReject}>‚ùå Reject</button>\n        </div>\n      )}\n      <audio ref={remoteAudioRef} autoPlay />\n      <audio ref={ringtoneRef} src=\"/ringtone.mp3\" loop preload=\"auto\" />\n    </>\n  );\n};\nexport default WebRTCPhone;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}